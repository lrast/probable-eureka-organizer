{% extends "layout.html" %}

{% block subtitle %} Topic: {{topic["name"]}} {% endblock %}

{% block body %}


<h1> {{topic["name"]}} </h1>

<table>
    <thead>
        <tr>
            <th colspan="2">Pages:</th>
        </tr>
    </thead>
    <tbody>
        {% for page in pages %}
            <tr>
                <td class="wide-column"> <a href='{{ url_for("servePage", pageid=page["id"])}}' >  {{ page["name"] }}  </a> </td>
                <td class="thin-column"> <a href='{{ url_for("viewEntry", page=page["id"])}}' > info  </a> </td>
                <td class="thin-column"> <a href='{{ url_for("button_remove_pair", pageid=page["id"], topicid=topic["id"], base="topic") }}' > Remove from topic </a> </td>
            </tr>
        {% endfor %}
    </tbody>
</table>


<a href='{{ url_for("button_add_PTR", topicid=topic["id"]) }}'> Add page </a> <br>


<h3> <a href='{{ url_for("viewEntry", topic=topic["id"], toggle="editPanel", **pageState) }}'> Edit Topic </a> </h3>
{% if pageState["editPanel"] %}
<a href='{{ url_for("button_delete", topicid=topic["id"]) }}'> Delete Topic </a>
{% endif %}


<h2> <a href='{{ url_for("viewEntry", topic=topic["id"], toggle="showRelationships", **pageState) }}'> Subtopics </a> </h2>
{% if pageState["showRelationships"] %}
<table>
    <thead>
        <tr>
            <th colspan="2">Subtopics:</th>
        </tr>
    </thead>
    <tbody>
        {% for relatedTopic in relatedTopics %}
            <tr>
                <td class="thin-column"> <a href='{{url_for("viewEntry", topic=relatedTopic["id"])}}' >  {{ relatedTopic["name"] }}  </a> </td>
                <td class="thin-column"> <a href='{{url_for("button_remove_TTR", lefttopicid=relatedTopic["id"], righttopicid=topic["id"])}}' > Remove relationship </a> </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<a href='{{url_for("button_add_TTR", righttopicid=topic["id"])}}'> Add subtopic </a> <br>
{% else %}
I'm not sure where to put this button
<br>
<a href=''>Show subtopic pages</a>
{% endif %}



{% endblock %}